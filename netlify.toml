# ⚠️ WARNING: If changing Node version, update everywhere: .nvmrc, package.json, Netlify settings.
[build]
  command = "pnpm install && pnpm run build"
  publish = "dist"
  environment = { NODE_VERSION = "18" }

# Add build settings to prevent caching issues
[functions]
  included_files = ["src/**/*", "public/**/*"]

# Add ignore command to force clean builds
[build.processing]
  skip_processing = false

# Environment variables for build
[build.environment]
  # Force reinstall of dependencies
  NODE_OPTIONS = "--max_old_space_size=4096"
  # Disable npm cache
  NPM_CONFIG_CACHE = "/tmp/.npm"
  # Clear pnpm cache
  PNPM_CACHE_FOLDER = "/tmp/.pnpm-store"

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

[template.environment]
  REACT_APP_API_URL = "Your API URL (e.g., https://your-backend.onrender.com/api)"