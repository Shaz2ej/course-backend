# ⚠️ WARNING: If changing Node version, update everywhere: .nvmrc, package.json, Netlify settings.
[build]
  command = "pnpm install && pnpm run build"
  publish = "dist"
  environment = { NODE_VERSION = "18" }

# Add build settings to prevent caching issues
[functions]
  included_files = ["src/**/*", "public/**/*"]

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

[template.environment]
  REACT_APP_API_URL = "Your API URL (e.g., https://your-backend.onrender.com/api)"

# Force clean builds to prevent cached module issues
[build.environment]
  # Clear cache on each build
  NETLIFY_BUILD_BASE = "/opt/buildhome/.netlify-build"
  # Force reinstall of dependencies
  NODE_OPTIONS = "--max_old_space_size=4096"